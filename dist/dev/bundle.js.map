{"version":3,"file":"bundle.js.map","sources":["../Users/zhengqiguang/Work/github/QV/src/common/selector.js","../Users/zhengqiguang/Work/github/QV/src/dsl/for.js","../Users/zhengqiguang/Work/github/QV/src/dsl/index.js","../Users/zhengqiguang/Work/github/QV/src/compiler/ast/parse-tag.js","../Users/zhengqiguang/Work/github/QV/src/compiler/ast/parse.js","../Users/zhengqiguang/Work/github/QV/src/compiler/ast/index.js","../Users/zhengqiguang/Work/github/QV/src/core/render.js","../Users/zhengqiguang/Work/github/QV/src/core/compiler-v2.js","../Users/zhengqiguang/Work/github/QV/src/core/event-loop.js","../Users/zhengqiguang/Work/github/QV/src/core/node.js","../Users/zhengqiguang/Work/github/QV/src/core/watcher.js","../Users/zhengqiguang/Work/github/QV/src/core/data.js","../Users/zhengqiguang/Work/github/QV/src/core/core.js","../Users/zhengqiguang/Work/github/QV/src/index.js"],"sourcesContent":["/**\n * Created by zhengqiguang on 2017/6/15.\n */\n\nexport default {\n    s(selector = \"\"){ //单个\n        return document.querySelector(selector);\n    },\n    m(selector = \"\"){// 集合\n        return document.querySelectorAll(selector);\n    },\n    id(id = \"\"){\n        return document.getElementById(id);\n    }\n\n}\n","/**\n * Created by zhengqiguang on 2017/6/15.\n */\n\n\n\nconst For = {\n    name: \"for\",\n    general(el){\n\n\n    }\n};\n\nexport default For;\n\n\n","/**\n * Created by zhengqiguang on 2017/6/15.\n */\n\nimport _for from \"./for\";\n\nvar dsl_prefix = \"dsl-\";\n\nconst dslMap = {};\n\nclass DSL {\n    constructor() {\n        this.initAll();\n    }\n\n    initAll() {\n        dslMap[`${dsl_prefix}${_for.name}`] = _for;\n    }\n\n    get dslMap() {\n        return dslMap;\n    }\n}\n\n\nexport default new DSL();\n","var attrRE = /([:\\w-]+)|['\"]{1}([^'\"]*)['\"]{1}/g;\n\n// create optimized lookup object for\n// void elements as listed here:\n// http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements\n\nimport dsl from \"../../dsl/index\";\n\nvar lookup = (Object.create) ? Object.create(null) : {};\nlookup.area = true;\nlookup.base = true;\nlookup.br = true;\nlookup.col = true;\nlookup.embed = true;\nlookup.hr = true;\nlookup.img = true;\nlookup.input = true;\nlookup.keygen = true;\nlookup.link = true;\nlookup.menuitem = true;\nlookup.meta = true;\nlookup.param = true;\nlookup.source = true;\nlookup.track = true;\nlookup.wbr = true;\n\nexport default function (tag) {\n    var i = 0;\n    var key;\n    var res = {\n        type: 'tag',\n        name: '',\n        voidElement: false,\n        attrs: {},\n        children: [],\n        dsl: []\n    };\n\n    tag.replace(attrRE, function (match) {\n\n        if (dsl.dslMap[match]) {\n           // res.dsl.push(match);\n        }\n\n        if (i % 2) {\n            key = match;\n        } else {\n            if (i === 0) {\n                if (lookup[match] || tag.charAt(tag.length - 2) === '/') {\n                    res.voidElement = true;\n                }\n                res.name = match;\n            } else {\n                res.attrs[key] = match.replace(/['\"]/g, '');\n            }\n        }\n        i++;\n    });\n\n    return res;\n};","/**\n * Created by zhengqiguang on 2017/6/15.\n */\nvar tagRE = /<(?:\"[^\"]*\"['\"]*|'[^']*'['\"]*|[^'\">])+>/g;\n\nimport parseTag from \"./parse-tag\";\n\nvar empty = Object.create ? Object.create(null) : {};\n\nexport default function (html, options) {\n    options || (options = {});\n    options.components || (options.components = empty);\n    var result = [];\n    var current;\n    var level = -1;\n    var arr = [];\n    var byTag = {};\n    var inComponent = false;\n\n    html.replace(tagRE, function (tag, index) {\n        if (inComponent) {\n            if (tag !== ('</' + current.name + '>')) {\n                return;\n            } else {\n                inComponent = false;\n            }\n        }\n        var isOpen = tag.charAt(1) !== '/';\n        var start = index + tag.length;\n        var nextChar = html.charAt(start);\n        var parent;\n\n        if (isOpen) {\n            level++;\n\n            current = parseTag(tag);\n            if (current.type === 'tag' && options.components[current.name]) {\n                current.type = 'component';\n                inComponent = true;\n            }\n\n            if (!current.voidElement && !inComponent && nextChar && nextChar !== '<') {\n                current.children.push({\n                    type: 'text',\n                    content: html.slice(start, html.indexOf('<', start)),\n                    parent: current\n                });\n            }\n\n            byTag[current.tagName] = current;\n\n            // if we're at root, push new base node\n            if (level === 0) {\n                result.push(current);\n            }\n\n            parent = arr[level - 1];\n\n            if (parent) {\n                current.prev = parent.children[parent.children.length - 1]\n                parent.children[parent.children.length - 1].next = current;\n                parent.children.push(current);\n                current.parent = parent;\n            }\n\n            arr[level] = current;\n        }\n\n        if (!isOpen || current.voidElement) {\n            level--;\n            if (!inComponent && nextChar !== '<' && nextChar) {\n                // trailing text node\n                arr[level].children.push({\n                    type: 'text',\n                    content: html.slice(start, html.indexOf('<', start)),\n                    parent: arr[level]\n                });\n            }\n        }\n    });\n\n    return result;\n};","/**\n * Created by zhengqiguang on 2017/6/15.\n * 修改 by  https://github.com/HenrikJoreteg/html-parse-stringify/\n */\nimport parse from \"./parse\";\nimport stringify from \"./stringify\";\n\nexport {parse, stringify};\n\n","/**\n * Created by zhengqiguang on 2017/6/15.\n */\n\n\n\nconst render = {\n\n    mount($node, $data){\n\n        let $newDom = this.generalDom($node.$tplfn($data));\n\n        this.replaceNode($newDom, $node);\n\n    },\n\n    generalDom(domStr){\n        var $temp = document.createElement(\"div\");\n        $temp.innerHTML = domStr.trim(); //不然会有多余的空格等东西\n        return $temp.childNodes[0];\n    },\n\n    replaceNode(newDom, node){\n        let $el = node.$el;\n\n        $el.parentNode.replaceChild(newDom, $el);\n\n        node.$el = newDom;\n    }\n\n\n}\n\n\nexport default render;","/**\n * Created by zhengqiguang on 2017/6/15.\n */\n\n\nimport {parse as htmlParse, stringify as htmlStringify} from \"../compiler/ast/index\";\n\nimport Render from \"./render\";\n\n\nconst compiler_helper = {\n    _c(tagName, attrs, children = [], data){\n\n        console.log(data);\n\n    },\n    _t(text, data){\n\n\n        console.log(text, data);\n\n    },\n    //\n    // generaltplFn(){\n    //\n    //     let a = new Function(\"that\", \"with(that){; return _tt()}\");\n    //\n    //     a(this);\n    //\n    //\n    // },\n\n    generaltplFn($ast){\n\n        let $tempFn = this.generalNode($ast);\n\n\n        $tempFn = `with(that){return ${$tempFn}}`;\n\n        console.log($tempFn);\n\n        let a = new Function(\"that\", \"data\", `${$tempFn}`);\n\n        console.log(a(this, {a: 1, sdf: \"hello\", ccc: \"nimei\"}));\n\n        return {};\n\n    },\n    generalNode($node){\n\n        if ($node.dsl && $node.dsl.length) { //存在 dsl\n\n        } else if ($node.type === \"tag\") {\n            return `_c('${$node.name}', ${JSON.stringify($node.attrs)},[${$node.children.map(item => {\n                return this.generalNode(item)\n            })}],data)`\n\n        } else if ($node.type === \"text\") {\n            $node.content = $node.content.replace(/\\n/g, \"\");\n\n            return `_t('${$node.content.trim()}',data)`\n        }\n\n\n    }\n\n\n}\n\n\nclass Compiler {\n\n\n    constructor(tpl) {\n        this.$tpl = Render.generalDom(tpl);\n        this.tpl = this.$tpl.outerHTML;\n        this.$ast = htmlParse(tpl);\n\n        compiler_helper.generaltplFn(this.$ast[0]);\n\n\n        // console.log(htmlStringify(this.$ast));\n\n        // this.init(compiler_helper.generaltplFn(this.tpl));\n\n    }\n\n\n    init({tplFn, linkArgs}) {\n        this.tplFn = tplFn;\n        this.linkArgs = linkArgs;\n    }\n\n    rebuild() {\n\n\n    }\n\n}\n\n\nexport default Compiler;\n","/**\n * Created by zhengqiguang on 2017/6/15.\n */\n\n\nlet EventLoop = {\n    d_o(fn){\n        let p = Promise.resolve();\n        p.then(fn).catch((e) => {\n            console.log(e);\n        });\n    }\n\n}\n\nexport default EventLoop;\n","/**\n * Created by zhengqiguang on 2017/6/15.\n */\n\nimport selector from  \"../common/selector\";\n\nimport Compiler from \"./compiler-v2\";\n\nimport Render  from \"./render\";\n\nimport EventLoop from \"./event-loop\";\n\n\nclass Node {\n\n    constructor({el, template, data}) {\n        this.$data = data;\n        this.el = el;\n        this.template = template;\n        this.$el = selector.s(this.el);\n\n        let $t = selector.s(this.template);\n        if ($t) {\n            this.$template = $t.innerHTML.trim();\n        } else {\n            //error\n        }\n        this.$compiler = new Compiler(this.$template);\n\n        this.$args = this.$compiler.linkArgs;\n        this.$tplfn = this.$compiler.tplFn;\n    }\n\n    update() {\n        EventLoop.d_o(Render.mount.bind(Render, this, this.$data));\n    }\n\n}\n\nexport default Node;\n","/**\n * Created by zhengqiguang on 2017/6/15.\n */\n\nclass Watcher {\n    constructor(data) {\n        this.$data = data;\n        this.mountWatcher();\n\n    }\n\n    mountWatcher() {\n\n        let od = this.$data[\"_od_\"];\n\n        for (let key in this.$data) {\n\n            (function (key) {\n\n                let timeoutHandler = null;\n\n                if (key !== \"_od_\" && !od[key].mounted) {\n                    if (!od[key]) {\n                        throw new Error(`data:${key} is init `);\n                    }\n                    Object.defineProperty(this.$data, key, {\n                        get () {\n                            return od[key].value;\n                        },\n                        set(value) {\n                            clearTimeout(timeoutHandler);\n                            setTimeout(() => {\n                                if (value !== od[key].value) {\n                                    var $n = od[key].linkNodes;\n                                    od[key].value = value;\n                                    for (var i = 0, n; n = $n[i]; i++) {\n                                        n.update();\n                                    }\n                                }\n                            }, 1000 / 60);//一帧节流\n\n                        }\n                    });\n                    od[key].mounted = true;\n                }\n            }.bind(this))(key);\n\n        }\n    }\n\n    linkNode($node) {\n\n        for (let i = 0, n; n = $node.$args[i]; i++) {\n            if (this.$data[n] &&\n                this.$data[\"_od_\"][n] &&\n                this.$data[\"_od_\"][n].linkNodes.indexOf($node) === -1) {\n                this.$data[\"_od_\"][n].linkNodes.push($node);\n            }\n        }\n    }\n\n\n    updateData() {\n\n\n    }\n\n\n}\n\n\nexport default Watcher;\n","/**\n * Created by zhengqiguang on 2017/6/15.\n */\n\nconst helper = {\n    insertOD($targetData, $data){\n\n        !$targetData && ($targetData = {});\n\n        for (var key in $data) {\n            $targetData[key] = {\n                value: $data[key],\n                linkNodes: [],\n                mounted: false\n            }\n        }\n\n        return $targetData;\n\n    }\n\n\n}\n\nclass Data {\n\n    static formatData(data = {}) {\n        data[\"_od_\"] = helper.insertOD(data[\"_od_\"], data);\n        return data;\n    }\n\n\n}\n\nexport default Data;\n","/**\n * Created by zhengqiguang on 2017/6/14.\n */\n\nimport Node from \"./node\";\nimport Watcher from \"./watcher\";\nimport Data from \"./data\";\nimport render from \"./render\";\n\nclass QV {\n    constructor(opt = {}) {\n        this._$opt = opt;\n\n        this.formatOption(opt);\n\n        this.mountRoot();\n\n    }\n\n    formatOption(opt) {\n\n        this.$data = Data.formatData(opt.data);\n\n        this.$root = new Node(opt);\n\n        this.$watcher = new Watcher(this.$data);\n\n        this.$watcher.linkNode(this.$root);\n\n    }\n\n    mountRoot() {\n        render.mount(this.$root, this.$data);\n    }\n\n\n}\n\n\nexport  default QV;\n","/**\n * Created by zhengqiguang on 2017/6/14.\n */\n\n\nimport Core from \"./core/core\";\n\n\n\nexport default Core;\n"],"names":["selector","document","querySelector","querySelectorAll","id","getElementById","For","el","dsl_prefix","dslMap","DSL","initAll","_for","name","attrRE","lookup","Object","create","area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","tag","i","key","res","replace","match","dsl","charAt","length","voidElement","attrs","tagRE","empty","html","options","components","result","current","level","arr","byTag","inComponent","index","isOpen","start","nextChar","parent","parseTag","type","children","push","slice","indexOf","tagName","prev","next","render","$node","$data","$newDom","generalDom","$tplfn","replaceNode","domStr","$temp","createElement","innerHTML","trim","childNodes","newDom","node","$el","parentNode","replaceChild","compiler_helper","data","log","text","$ast","$tempFn","generalNode","a","Function","sdf","ccc","JSON","stringify","map","item","content","Compiler","tpl","$tpl","Render","outerHTML","htmlParse","generaltplFn","tplFn","linkArgs","EventLoop","fn","p","Promise","resolve","then","catch","e","Node","template","s","$t","$template","$compiler","$args","d_o","mount","bind","Watcher","mountWatcher","od","timeoutHandler","mounted","Error","defineProperty","value","$n","linkNodes","n","update","helper","$targetData","Data","insertOD","QV","opt","_$opt","formatOption","mountRoot","formatData","$root","$watcher","linkNode"],"mappings":"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"}